<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
	<script src="JSONBinarySearchTree.js"></script>
	
	<script>
		// SVG setup variables
		var height = 600;
		var width = 1000;
		var margin = {
				"top":50,
				"bottom":20,
				"left":10,
				"right":10
		}
		
		// how big we want the nodes to be
		var nodeRadius = 20;
		// ditto, except using d3.svg.symbol
		var nodeSize = 1000;
	</script>
	<style>
		text.node-null {
			font-size:7pt;
		}
		
		text.node-key {
			font-weight:bold;
		}
	</style>
</head>
<body>

<script>

//create a new tree
var bst = new JSONBinarySearchTree();
//insert some nodes
bst.insert(50);
bst.insert(30);
bst.insert(15);
bst.insert(20);
bst.insert(22);
bst.insert(35);
bst.insert(60);
bst.insert(75);
bst.insert(70);
bst.insert(80);
bst.insert(55);
bst.insert(21);
bst.insert(24);
bst.insert(23);
bst.remove(22);
bst.remove(24);
bst.remove(15);
bst.remove(30);
bst.remove(55);
bst.remove(75);

// create a svg element and assign a d3 handle to it
var svg = d3.select("body").append("svg")
	.attr("height", height + margin.top + margin.bottom)
	.attr("width", width + margin.left + margin.right)
	.append("g")
		.attr("width", width)
		.attr("height", height)
		.attr("transform", "translate(" + margin.left + "," + margin.top + ")");


// instantiate a d3 tree layout
var tree = d3.layout.tree()
			.sort(null)
			.size([width,height])
			// this specifies how the children of each node is accessed
			.children( function (d) {
				return (d.left == null && d.right == null) ? null : 
					[ d.left, d.right];
			});

// Edges between nodes as a <path class="link" />
var link = d3.svg.diagonal()
    .projection(function(d)
    {
        return [d.x, d.y];
    });


// function to draw the tree
function drawTree() {
	var nodes = tree.nodes(bst.getNodes());
	var links = tree.links(nodes);

	svg.selectAll(".link")
		.data(links)
		.enter()
		.append("path")
			.attr("class", "link")
			.attr("fill", "none")
			.attr("stroke", "black")
			.attr("d", link);
		
	var nodegroups = svg.selectAll(".node")
		.data(nodes)
		.enter()
		.append("g")
			.attr("class", "node")
			.attr("width", nodeRadius * 2)
			.attr("height", nodeRadius * 2)
			.attr("transform", function(d) {
				return "translate(" + d.x + ", " + d.y + ")";
			});
			
	nodegroups.append("path")
		.attr("class", function (d) {
			if (d.key === null)
				return "node-null";
			else
				return "node-key";
		})
		.attr("d", d3.svg.symbol()
			.size(function (d) {
				if (d.key === null)
					return nodeSize - 300;
				else
					return nodeSize;
			})
			.type(function (d) {
				if (d.key === null) {
					return "square";
				}
				else {
					return "circle";
				}
			}));
	
	nodegroups.append("text")
		.attr("class", function (d) {
			if (d.key === null)
				return "node-null";
			else
				return "node-key";
		})
		.attr("fill", "white")
		.attr("text-anchor", "middle")
		.attr("dominant-baseline", "central")
		.text(function (d) {
			return (d.key === null) ? "null" : d.key;
		});
}

drawTree();


</script>
</body>
</html>